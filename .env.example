########################################
# Postgres Database Configuration
DBHOST='postgres'
DBNAME='genlayer_state'
DBUSER='postgres'
DBPASSWORD='postgres'
DBPORT='5432'
DATABASE_POOL_SIZE='20'           # Database connection pool size
DATABASE_MAX_OVERFLOW='10'        # Maximum overflow connections
# Set the compose profile to 'hardhat' to use the hardhat network
REMOTE_DATABASE='false'

########################################
# Logging Configuration
LOGCONFIG='dev'                   # dev/prod
LOG_LEVEL='debug'                 # 'critical', 'error', 'warning', 'info', 'debug', 'trace'
DISABLE_INFO_LOGS_ENDPOINTS='["ping", "eth_getTransactionByHash","gen_getContractSchema", "gen_getContractSchemaForCode", "net_version", "sim_getTransactionsForAddress", "sim_getConsensusContract", "eth_estimateGas", "eth_chainId", "eth_getBlockByNumber", "eth_gasPrice", "sim_getFinalityWindowTime"]'

########################################
# JsonRPC Server Configuration
JSONRPC_SERVER_URL='http://jsonrpc:4000'  # Internal URL for consensus workers to connect to JSON-RPC server
RPCPORT='4000'
RPCDEBUGPORT='4678'               # debugpy listening port
SERVER_NAME='studio.genlayer.com'

########################################
# Compose and Build
# Set the compose profile to 'hardhat' to use the hardhat network
COMPOSE_PROFILES=''
FRONTEND_BUILD_TARGET='dev'       # change to 'dev' to run in dev mode
BACKEND_BUILD_TARGET='debug'      # change to 'prod' or remove to run in prod mode
REDIS_URL='redis://redis:6379/0'  # Redis URL for Socket.IO message queue (e.g., 'redis://redis:6379/0')

########################################
# GenVM Configuration
GENVM_BIN="/genvm/bin"
GENVMROOT="/genvm"
GENVM_LLM_DEBUG="0"
GENVM_WEB_DEBUG="0"

# Ollama Server Configuration
OLAMAPORT='11434'

# WebRequest Server Configuration
WEBDRIVERHOST='webdriver'
WEBDRIVERPORT='5001'
# Optional: tweak web rendering behavior used by validators' web module
# Default navigation timeout (ms) for webdriver fetches (supports Playwright-based service)
WEBDRIVER_TIMEOUT_MS="60000"
# Number of retries when a render fails (e.g., 408 Navigation timeout)
WEB_RENDER_RETRIES="2"

########################################
# Consensus Rollup
# Hardhat port
HARDHAT_URL='http://hardhat'
HARDHAT_PORT='8545'
HARDHAT_PRIVATE_KEY='0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80'
HARDHAT_CHAIN_ID='61999'

########################################
# LLM Providers Configuration
# If you want to use OpenAI LLMs, add your key here
OPENAIKEY='<add_your_openai_api_key_here>'

# If you want to use Anthropic AI LLMs, add your key here
ANTHROPIC_API_KEY='<add_your_anthropic_api_key_here>'

# If you want to use Heurist AI LLMs, add your key here
HEURISTAIURL='https://llm-gateway.heurist.xyz'
HEURISTAIMODELSURL='https://raw.githubusercontent.com/heurist-network/heurist-models/main/models.json'
HEURISTAIAPIKEY='<add_your_heuristai_api_key_here>'

# If you want to use XAI LLMs, add your key here
XAI_API_KEY='<add_your_xai_api_key_here>'

# If you want to use Gemini LLMs, add your key here
GEMINI_API_KEY='<add_your_gemini_api_key_here>'

########################################
# Validator Configuration
# JSON array of initial validators to be created on startup.
# {"stake": 100, "provider": "openai", "model": "gpt-4o", "amount": 5}
VALIDATORS_CONFIG_JSON='[
  {"stake": 100, "provider": "openai", "model": "gpt-4o", "amount": 5}
]'

########################################
# Resources setup
# Number of container replicas to run, used to scale up for production
JSONRPC_REPLICAS='1'
CONSENSUS_WORKERS='3'
# Production Configuration (for Gunicorn deployment)
WEB_CONCURRENCY='1'               # Number of Gunicorn workers (default: CPU cores * 2)
# Service resources limit
COMPOSE_RPC_CPU_LIMIT='2'
COMPOSE_RPC_CPU_RESERVATION='1'
COMPOSE_RPC_MEM_LIMIT='8g'
COMPOSE_RPC_MEM_RESERVATION='4g'
COMPOSE_WORKER_CPU_LIMIT='2'
COMPOSE_WORKER_CPU_RESERVATION='1'
COMPOSE_WORKER_MEM_LIMIT='8g'
COMPOSE_WORKER_MEM_RESERVATION='4g'

# Consensus Parameters
CONSENSUS_CONTRACT_ADDRESS='0x0000000000000000000000000000000000000000'
DEFAULT_NUM_INITIAL_VALIDATORS=5
DEFAULT_CONSENSUS_MAX_ROTATIONS=3

########################################
# Frontend Configuration
# If you want to run the frontend in production, change http to https and ws to wss
VITE_JSON_RPC_SERVER_URL='http://127.0.0.1:4000/api'  # if VITE_PROXY_ENABLED = 'true' change to '/api'
VITE_WS_SERVER_URL='ws://127.0.0.1:4000'              # if VITE_PROXY_ENABLED = 'true' change to '/'
VITE_PLAUSIBLE_DOMAIN='studio.genlayer.com'
FRONTEND_PORT='8080'

# Vite Proxy Configuration (for local development)
VITE_PROXY_ENABLED='false'
VITE_PROXY_JSON_RPC_SERVER_URL='http://jsonrpc:4000'
VITE_PROXY_WS_SERVER_URL='ws://jsonrpc:4000'
VITE_IS_HOSTED='false'

# Consensus mechanism
VITE_FINALITY_WINDOW=30                                # in seconds
VITE_FINALITY_WINDOW_APPEAL_FAILED_REDUCTION=0.2      # 20% reduction per appeal failed
VITE_MAX_ROTATIONS=3
